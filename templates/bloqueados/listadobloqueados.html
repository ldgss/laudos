{% extends "base/base.html" %}

{% block header %}
  <script defer src="{{url_for("static", filename="js/bloqueados/utils.js")}}"></script>
   
{% endblock %}

{% block content %}


<div class="container mt-5">
    <div class="table-responsive">
        <table class="table table-striped table-hover" id="listado_con_vto">
            <thead>
                <tr>
                    <th>ID Unico</th>
                    <th>Denominacion</th>
                    <th>motivo</th>
                    <th>Fecha bloqueos</th>
                    <th>Observaciones</th>
                    <th>Responsable</th>
                    <th>Laudo</th>
                    <th>Acción</th>
                    <th>Seleccionar</th>
                </tr>
            </thead>
            <tbody>
                {% for l in listado %}
                <tr>
                    <td>
                        {{l.mercaderia}}
                    </td>
                    <td>
                        {{l.denmercaderia}}
                    </td>
                    <td>
                        {{l.mbmotivo}}
                    </td>
                    <td class="fecha_elaboracion">
                        {{l.fecha_registro.strftime('%Y-%m-%d %H:%M')}}
                    </td>
                    <td>
                        {{l.observaciones}}
                    </td>
                    <td>
                        {{l.nombre}}
                    </td>
                    <td>
                        <a href="{{url_for('bloqueos.bloqueados_imprimir', id_unico=l.mercaderia)}}" class="btn btn-outline-primary">Ver</a >
                    </td>
                    <td>
                        <button type="button" class="btn btn-success boton_liberar_modal" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
                            Liberar
                          </button>
                    </td>
                    <td>
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="id_unico">
                        </div>
                    </td>
                    <td>
                        <div class="mb-3 form-check">
                            <label class="form-check-label" for="id_unico"></label>
                          </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<div class="text-center">
    <nav aria-label="Paginación">
        <ul class="pagination justify-content-center">
        {% if pagina_actual > 1 %}
            <li class="page-item">
            <a class="page-link" href="">Anterior</a>
            </li>
        {% endif %}
        {% for i in range(1, total_paginas + 1) %}
            <li class="page-item {% if i == pagina_actual %}active{% endif %}">
            <a class="page-link" href="">{{ i }}</a>
            </li>
        {% endfor %}
        {% if pagina_actual < total_paginas %}
            <li class="page-item">
            <a class="page-link" href="">Siguiente</a>
            </li>
        {% endif %}
        </ul>
    </nav>
    
    <a href="javascript:void(0);" class="btn btn-secondary" onclick="boton_volver()">Volver</a>
    
    <a href="{{url_for('bloqueos.bloqueos_agregar_multiple')}}" class="btn btn-success">Agregar Seleccion</a>
    

</div>
<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="staticBackdropLabel">Datos de la Liberación</h1>
      </div>
      <div class="modal-body">
        <table class="table table-striped table-hover">
          <tbody>
            <tr>
              <th><label for="numero_unico_modal">Número Único</label></th>
              <td><input type="text" id="numero_unico_modal" class="form-control" readonly></td>
            </tr>
            <tr>
              <th><label for="denominacion_modal">Denominación</label></th>
              <td><input type="text" id="denominacion_modal" class="form-control" readonly></td>
            </tr>
            <tr>
              <th><label for="motivo_modal">Motivo</label></th>
              <td><input type="text" id="motivo_modal" class="form-control" readonly></td>
            </tr>
            <tr>
              <th><label for="fecha_bloqueo_modal">Fecha de Bloqueo</label></th>
              <td><input type="text" id="fecha_bloqueo_modal" class="form-control" readonly></td>
            </tr>
            <tr>
              <th><label for="fecha_actual_modal">Fecha Liberación</label></th>
              <td><input type="text" id="fecha_actual_modal" class="form-control" readonly></td>
            </tr>
            <tr>
              <th><label for="usuario_actual_modal">Usuario Liberacion</label></th>
              <td><input readonly maxlength="30" type="text" class="form-control" 
                name="user_name" id="user_name" value="{{session["nombre"]}}">
                <input type="hidden" id="user_id_modal" name="user_id" value="{{session["id"]}}">
              </td>
              
            </tr>
            <tr>
              <th><label for="observaciones_modal">Observaciones</label></th>
              <td><textarea id="observaciones_modal" class="form-control" rows="3" placeholder="Ingrese observaciones"></textarea></td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
        <button type="button" class="btn btn-primary">Confirmar</button>
      </div>
    </div>
  </div>
</div>
{% endblock %}